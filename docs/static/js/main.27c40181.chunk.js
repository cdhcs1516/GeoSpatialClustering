(this.webpackJsonpmy_cluster=this.webpackJsonpmy_cluster||[]).push([[0],{10:function(e,t){},18:function(e,t,r){},19:function(e,t,r){},26:function(e,t){},27:function(e,t){},29:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),o=r(11),c=r.n(o),s=(r(18),r(3)),l=r(2),u=(r.p,r(19),r(20),r(13)),i=r(12),j=r(8),m=function(e,t){var r={Sheets:{data:j.utils.json_to_sheet(e)},SheetNames:["data"]},n=j.write(r,{bookType:"xlsx",type:"array"}),a=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});i.saveAs(a,t+".xlsx")},d=r(0);function b(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),r=t[0],a=t[1],o=Object(n.useState)(0),c=Object(l.a)(o,2),i=c[0],j=c[1],b=Object(n.useState)(-180),p=Object(l.a)(b,2),h=p[0],f=p[1],O=Object(n.useState)(180),g=Object(l.a)(O,2),x=g[0],v=g[1],N=Object(n.useState)(90),y=Object(l.a)(N,2),C=y[0],S=y[1],L=Object(n.useState)(-90),k=Object(l.a)(L,2),B=k[0],I=k[1],w=Object(n.useState)(30),F=Object(l.a)(w,2),D=F[0],P=F[1],T=Object(n.useState)(4),_=Object(l.a)(T,2),E=_[0],R=_[1],U=Object(n.useState)({}),J=Object(l.a)(U,2),M=J[0],Z=J[1],z=Object(n.useState)({}),W=Object(l.a)(z,2),A=W[0],G=W[1],q=Object(n.useState)(-1),H=Object(l.a)(q,2),K=H[0],Q=H[1],V=function(e,t){var r,n=Object(s.a)(t);try{for(n.s();!(r=n.n()).done;){var a=Object(l.a)(r.value,2),o=a[0];if(a[1].has(e))return o}}catch(c){n.e(c)}finally{n.f()}return-1};return Object(d.jsx)("div",{children:Object(d.jsx)("div",{className:"project",children:Object(d.jsx)("div",{className:"container",children:Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"col-md-12 m-auto",children:[Object(d.jsx)("h5",{className:"display-4 text-center",children:"GeoSpatial Clustering Tool"}),Object(d.jsx)("hr",{}),Object(d.jsxs)("form",{children:[Object(d.jsx)("p",{children:"Url of JSON Data"}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{type:"url",className:"form-control form-control-lg",placeholder:"Data Url",name:"dataUrl",value:r,onChange:function(e){return a(e.target.value)}})}),Object(d.jsx)("p",{children:"West Longitude of BBox"}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{type:"number",className:"form-control form-control-lg",placeholder:"West Longitude",name:"westLng",value:h,onChange:function(e){return f(e.target.value)}})}),Object(d.jsx)("p",{children:"East Longitude of BBox"}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{type:"number",className:"form-control form-control-lg",placeholder:"East Longitude",name:"eastLng",value:x,onChange:function(e){return v(e.target.value)}})}),Object(d.jsx)("p",{children:"North Latitude of BBox"}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{type:"number",className:"form-control form-control-lg",placeholder:"North Latitude",name:"northLat",value:C,onChange:function(e){return S(e.target.value)}})}),Object(d.jsx)("p",{children:"South Latitude of BBox"}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{type:"number",className:"form-control form-control-lg",placeholder:"South Latitude",name:"southLat",value:B,onChange:function(e){return I(e.target.value)}})}),Object(d.jsx)("p",{children:"Current Zoom Level (from 0 to 16)"}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{type:"number",className:"form-control form-control-lg",placeholder:"Zoom Level",name:"zoom",value:E,onChange:function(e){return R(e.target.value)}})}),Object(d.jsx)("p",{children:"Radius (px) for Clustering"}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{type:"number",className:"form-control form-control-lg",placeholder:"Radius",name:"radius",value:D,onChange:function(e){return P(e.target.value)}})}),Object(d.jsx)("hr",{}),Object(d.jsx)("p",{children:"Number of Points Loaded"}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{type:"number",className:"form-control form-control-lg",placeholder:"Number of Points Loaded",name:"numPts",value:i,disabled:!0})}),Object(d.jsx)("button",{onClick:function(e){e.preventDefault(),fetch(r).then((function(e){return e.json()})).then((function(e){console.log(e.length);var t=e.map((function(e){return{type:"Feature",properties:{cluster:!1,markerId:e.id},geometry:{type:"Point",coordinates:[parseFloat(e.stoplng),parseFloat(e.stoplat)]}}}));Z(t),console.log(M),M.length>0&&j(M.length)})).catch((function(e){console.log(e)}));var t=new u.a({radius:D,maxZoom:16});t.load(M),G(t)},className:"btn btn-primary btn-block mt-4",children:"Load Data and Initialize SuperCluster"})]}),Object(d.jsx)("hr",{}),Object(d.jsx)("h5",{className:"display-4 text-center",children:"Cluster Result"}),Object(d.jsx)("hr",{}),Object(d.jsxs)("form",{children:[Object(d.jsx)("p",{children:"Number of Clusters"}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{type:"number",className:"form-control form-control-lg",placeholder:"Number of Clusters",name:"numCluster",value:K,disabled:!0})}),Object(d.jsx)("button",{onClick:function(e){e.preventDefault();var t=A.getClusters([h,B,x,C],E);Q(t.length),console.log(t)},className:"btn btn-primary btn-block mt-4",children:"Process Cluster"})]}),Object(d.jsx)("hr",{}),Object(d.jsxs)("div",{className:"d-grid gap-2 col-3 mx-auto",children:[Object(d.jsx)("button",{onClick:function(){var e=A.getClusters([h,B,x,C],E);Q(e.length);var t=e.map((function(e){return{clusterId:e.id,count:e.properties.point_count,longitude:e.geometry.coordinates[0],latitude:e.geometry.coordinates[1]}}));m(t,"clusters")},className:"btn btn-primary",children:"Save Clusters"}),Object(d.jsx)("button",{onClick:function(){var e=A.getClusters([h,B,x,C],E);Q(e.length);var t=new Map;e.forEach((function(e){var r=new Set(A.getLeaves(e.id,1/0).map((function(e){return e.properties.markerId})));t.set(e.id,r)}));var r=M.map((function(e){return{markerId:e.properties.markerId,longitude:e.geometry.coordinates[0],latitude:e.geometry.coordinates[1],clusterId:V(e.properties.markerId,t)}}));m(r,"markers")},className:"btn btn-primary",children:"Save Markers"})]}),Object(d.jsx)("hr",{}),Object(d.jsx)("p",{className:"text-center",children:"Implemented by Donghui Chen based on React and mapbox/supercluster."})]})})})})})}var p=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,30)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;r(e),n(e),a(e),o(e),c(e)}))};c.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(b,{})}),document.getElementById("root")),p()}},[[29,1,2]]]);
//# sourceMappingURL=main.27c40181.chunk.js.map